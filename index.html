<!DOCTYPE html>
<!-- saved from url=(0128)http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#0%20%E9%80%9A%E7%94%A8%E7%BA%A6%E5%AE%9A -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>接口文档啊1</title>
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <link rel="icon" type="image/png" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/favicon.ico">
    <link rel="stylesheet" href="assets/amazeui.min.css">
    <link rel="stylesheet" href="assets/editormd.preview.css">
    <script src="assets/jquery.min.js"></script>
    <style>
        #sidebar {
            width: 33%;
            height: 100%;
            position: fixed;
            top: 0;
            right: 0;
            overflow: hidden;
            background: #fff;
            z-index: 100;
            padding: 18px;
            border: 1px solid #ddd;
            border-top: none;
            border-bottom: none;
        }

        #sidebar:hover {
            overflow: auto;
        }

        #sidebar h1 {
            font-size: 16px;
        }

        #custom-toc-container {
            padding-left: 0;
            padding-top: 0;
        }
    </style>
    <link type="text/css" rel="stylesheet" href="assets/katex.min.css"><script id="-assets-js-katex-min" type="text/javascript" src="assets/katex.min.js"></script></head>

<body style="">

<div class="am-g">

    <div class="am-u-md-8 am-u-sm-12">
        <div style="">
            <header style="padding: 20px 0 0 20px;">
                <h1 style="font-size: 2em">接口文档啊1</h1>
                <p>分类：沙琪玛 <br>
                    标签：api<br>
                    作者：baagee 浏览量：31<br>
                    创建时间：2020-07-28 11:18:43<br>
                    修改时间：2020-07-28 11:18:43</p>
            </header>
            <hr>
            <div id="articleContent" class="markdown-body editormd-html-preview">

                <h2 id="h2-0-"><a name="0 通用约定" class="reference-link"></a><span class="header-link octicon octicon-link"></span>0 通用约定</h2><h3 id="h3-u7B7Eu540D"><a name="签名" class="reference-link"></a><span class="header-link octicon octicon-link"></span>签名</h3><ol>
                <li>双方约定一个对称密钥 secret_key 例如 “abcdefghijklmnop”</li><li>按一下顺序构造被签名内容字符串（UTF-8编码）：</li></ol>
                <ul>
                    <li>secret_key （如abcdefghijklmnop）</li><li>request_uri （如/consignor/cang/order/pushwithtask）</li><li>reqeust_body_raw （如{“ts”:153124523,”ver”:1,”task_code”:”ABCDEJKNPQ”}）</li></ul>
                <ol>
                    <li>将以上内容用 | 进行字符串拼接作为被签名内容，如abcdefghijklmnop|/consignor/cang/order/pushwithtask|{“ts”:153124523,”ver”:1,”task_code”:”ABCDEJKNPQ”}</li><li>对以上字符串进行sha1运算得到签名串40位字符串。如前面得到的字符串的签名结果是 843c25a6a73ca2685feb11d397cca34a7707c1ed</li><li>由于POST的内容未来可能会有调整，所以请不要按照特定顺序拼接内容，必须要对完整的RequestBody进行签名和验签。</li><li>验签注意，由于Java中很多框架支持自动读取JSON格式的数据，但是读取后并不能准确还原原始JSON字符串内容。为避免由于解析后重新生成JSON导致字符串不同，需要在框架解析之前，自行提取原始POST内容进行验签。如SpringMVC的一种实现方式：</li></ol>
                <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="lit">@RequestMapping</span><span class="pun">(</span><span class="str">"/xxx/yyy/zzz"</span><span class="pun">)</span></code></li><li class="L1"><code><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> xxxYyyZzz</span><span class="pun">(</span><span class="lit">@RequestBody</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> json</span><span class="pun">,</span><span class="typ">HttpServletRequest</span><span class="pln"> request</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">  </span><span class="typ">String</span><span class="pln"> uri </span><span class="pun">=</span><span class="pln"> </span><span class="str">"/xxx/yyy/zzz"</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">  </span><span class="typ">String</span><span class="pln"> key </span><span class="pun">=</span><span class="pln"> </span><span class="str">"abcdefghijklmnop"</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">  </span><span class="typ">String</span><span class="pln"> toSign </span><span class="pun">=</span><span class="pln"> key </span><span class="pun">+</span><span class="pln"> </span><span class="str">"|"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> uri </span><span class="pun">+</span><span class="pln"> </span><span class="str">"|"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> json</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">  </span><span class="typ">String</span><span class="pln"> signature </span><span class="pun">=</span><span class="pln"> sha1</span><span class="pun">(</span><span class="pln">toSign</span><span class="pun">);</span></code></li><li class="L6"><code><span class="pun">}</span></code></li></ol></pre><h2 id="h2-1-aoi-"><a name="1.根据AOI查询排班小哥接口" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1.根据AOI查询排班小哥接口</h2><p>POST  /srm/api2/getcourierbyaoi?sign=XXXXXXXXXXXXXX&amp;service_name=XXXX</p>
                <p>Content-Type: application/json</p>
                <h4 id="h4-u5165u53C2"><a name="入参" class="reference-link"></a><span class="header-link octicon octicon-link"></span>入参</h4><table>
                <thead>
                <tr>
                    <th>元素名</th>
                    <th>类型</th>
                    <th>必填</th>
                    <th>描述</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>aoi_id</td>
                    <td>string</td>
                    <td>是</td>
                    <td>AOI编码</td>
                </tr>
                <tr>
                    <td>date</td>
                    <td>string</td>
                    <td>是</td>
                    <td>日期（前后三天：3天前、今天、明天、后天）</td>
                </tr>
                <tr>
                    <td>type</td>
                    <td>string</td>
                    <td>是</td>
                    <td>排班类型（收P，派D，收+派（P,D））</td>
                </tr>
                <tr>
                    <td>sys</td>
                    <td>string</td>
                    <td>是</td>
                    <td>请求来源系统</td>
                </tr>
                </tbody>
            </table>
                <h4 id="h4-u8FD4u56DE"><a name="返回" class="reference-link"></a><span class="header-link octicon octicon-link"></span>返回</h4><table>
                <thead>
                <tr>
                    <th>元素名</th>
                    <th>类型</th>
                    <th>必填</th>
                    <th>描述</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>dept_code</td>
                    <td>string</td>
                    <td>是</td>
                    <td>AOI归属网点</td>
                </tr>
                <tr>
                    <td>aoi_name</td>
                    <td>string</td>
                    <td>是</td>
                    <td>AOI名称</td>
                </tr>
                <tr>
                    <td>aoi_area_list</td>
                    <td>list</td>
                    <td>是</td>
                    <td></td>
                </tr>
                </tbody>
            </table>
                <h5 id="h5-aoi_area_list-"><a name="aoi_area_list 结构" class="reference-link"></a><span class="header-link octicon octicon-link"></span>aoi_area_list 结构</h5><table>
                <thead>
                <tr>
                    <th>元素名</th>
                    <th>类型</th>
                    <th>必填</th>
                    <th>描述</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>aoi_area_code</td>
                    <td>string</td>
                    <td>是</td>
                    <td>AOI归属的AOI区域</td>
                </tr>
                <tr>
                    <td>schedule_list</td>
                    <td>list</td>
                    <td>是</td>
                    <td>班次信息</td>
                </tr>
                </tbody>
            </table>
                <h5 id="h5-schedule_list-"><a name="schedule_list 结构" class="reference-link"></a><span class="header-link octicon octicon-link"></span>schedule_list 结构</h5><table>
                <thead>
                <tr>
                    <th>元素名</th>
                    <th>类型</th>
                    <th>必填</th>
                    <th>描述</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>batch_code</td>
                    <td>string</td>
                    <td>是</td>
                    <td>班次code</td>
                </tr>
                <tr>
                    <td>batch_type</td>
                    <td>string</td>
                    <td>是</td>
                    <td>收P、派D</td>
                </tr>
                <tr>
                    <td>batch_start_time</td>
                    <td>string</td>
                    <td>是</td>
                    <td>班次开始时间：如 10:00</td>
                </tr>
                <tr>
                    <td>batch_end_time</td>
                    <td>string</td>
                    <td>是</td>
                    <td>班次结束时间：如 12:00</td>
                </tr>
                <tr>
                    <td>courier_list</td>
                    <td>list</td>
                    <td>是</td>
                    <td>收派员列表</td>
                </tr>
                <tr>
                    <td>weight_list</td>
                    <td>list</td>
                    <td>是</td>
                    <td>重量段</td>
                </tr>
                </tbody>
            </table>
                <h5 id="h5-courier_list-"><a name="courier_list 结构" class="reference-link"></a><span class="header-link octicon octicon-link"></span>courier_list 结构</h5><table>
                <thead>
                <tr>
                    <th>元素名</th>
                    <th>类型</th>
                    <th>必填</th>
                    <th>描述</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>courier_code</td>
                    <td>string</td>
                    <td>是</td>
                    <td>收派员工号</td>
                </tr>
                <tr>
                    <td>courier_name</td>
                    <td>string</td>
                    <td>是</td>
                    <td>收派员姓名</td>
                </tr>
                </tbody>
            </table>
                <h4 id="h4-weight_list-"><a name="weight_list 结构" class="reference-link"></a><span class="header-link octicon octicon-link"></span>weight_list 结构</h4><table>
                <thead>
                <tr>
                    <th>元素名</th>
                    <th>类型</th>
                    <th>必填</th>
                    <th>描述</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>weight_lower</td>
                    <td>int</td>
                    <td>是</td>
                    <td>最小重量(kg)</td>
                </tr>
                <tr>
                    <td>weight_upper</td>
                    <td>int</td>
                    <td>是</td>
                    <td>最大重量(kg)</td>
                </tr>
                </tbody>
            </table>
                <h4 id="h4-u5165u53C2u793Au4F8B"><a name="入参示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>入参示例</h4><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">    </span><span class="str">"aoi_id"</span><span class="pun">:</span><span class="str">"AOI编码"</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">    </span><span class="str">"date"</span><span class="pun">:</span><span class="str">"日期 2020-01-01（前后三天：3天前、今天、明天、后天）"</span><span class="pun">,</span></code></li><li class="L3"><code><span class="pln">    </span><span class="str">"type"</span><span class="pun">:</span><span class="str">"P|D|P,D"</span></code></li><li class="L4"><code><span class="pun">}</span></code></li></ol></pre><h4 id="h4-u8FD4u56DEu793Au4F8B"><a name="返回示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>返回示例</h4><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">    </span><span class="str">"errno"</span><span class="pun">:</span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">    </span><span class="str">"errmsg"</span><span class="pun">:</span><span class="str">"错误信息..."</span><span class="pun">,</span></code></li><li class="L3"><code><span class="pln">    </span><span class="str">"data"</span><span class="pun">:{</span></code></li><li class="L4"><code><span class="pln">        </span><span class="str">"dept_code"</span><span class="pun">:</span><span class="str">"AOI归属网点代码"</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pln">        </span><span class="str">"aoi_name"</span><span class="pun">:</span><span class="str">"AOI名称"</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pln">        </span><span class="str">"aoi_area_list"</span><span class="pun">:[</span></code></li><li class="L7"><code><span class="pln">            </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">                </span><span class="str">"aoi_area_code"</span><span class="pun">:</span><span class="str">"AOI归属的AOI区域"</span><span class="pun">,</span></code></li><li class="L9"><code><span class="pln">                </span><span class="str">"schedule_list"</span><span class="pun">:[</span></code></li><li class="L0"><code><span class="pln">                    </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">                        </span><span class="str">"batch_code"</span><span class="pun">:</span><span class="str">"班次code"</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">                        </span><span class="str">"batch_type"</span><span class="pun">:</span><span class="str">"收P or 派D"</span><span class="pun">,</span></code></li><li class="L3"><code><span class="pln">                        </span><span class="str">"batch_start_time"</span><span class="pun">:</span><span class="str">"班次开始时间：如 10:00"</span><span class="pun">,</span></code></li><li class="L4"><code><span class="pln">                        </span><span class="str">"batch_end_time"</span><span class="pun">:</span><span class="str">"班次结束时间：如 12:00"</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pln">                        </span><span class="str">"courier_list"</span><span class="pun">:[</span></code></li><li class="L6"><code><span class="pln">                            </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">                                </span><span class="str">"courier_code"</span><span class="pun">:</span><span class="str">"收派员工号"</span><span class="pun">,</span></code></li><li class="L8"><code><span class="pln">                                </span><span class="str">"courier_name"</span><span class="pun">:</span><span class="str">"收派员姓名"</span></code></li><li class="L9"><code><span class="pln">                            </span><span class="pun">},</span></code></li><li class="L0"><code><span class="pln">                            </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">                                </span><span class="str">"courier_code"</span><span class="pun">:</span><span class="str">"收派员工号"</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">                                </span><span class="str">"courier_name"</span><span class="pun">:</span><span class="str">"收派员姓名"</span></code></li><li class="L3"><code><span class="pln">                            </span><span class="pun">}</span></code></li><li class="L4"><code><span class="pln">                        </span><span class="pun">],</span></code></li><li class="L5"><code><span class="pln">                        </span><span class="str">"weight"</span><span class="pun">:[</span></code></li><li class="L6"><code><span class="pln">                            </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">                                </span><span class="str">"weight_lower"</span><span class="pun">:</span><span class="lit">0</span><span class="pun">,</span></code></li><li class="L8"><code><span class="pln">                                </span><span class="str">"weight_upper"</span><span class="pun">:</span><span class="lit">10</span></code></li><li class="L9"><code><span class="pln">                            </span><span class="pun">}</span></code></li><li class="L0"><code><span class="pln">                        </span><span class="pun">]</span></code></li><li class="L1"><code><span class="pln">                    </span><span class="pun">}</span></code></li><li class="L2"><code><span class="pln">                </span><span class="pun">]</span></code></li><li class="L3"><code><span class="pln">            </span><span class="pun">}</span></code></li><li class="L4"><code><span class="pln">        </span><span class="pun">]</span></code></li><li class="L5"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code><span class="pun">}</span></code></li></ol></pre></div>
        </div>
    </div>

    <div class="am-u-md-4">
        <div id="sidebar" class="am-show-md-up">
            <h1>目录</h1>
            <div class="markdown-body editormd-preview-container" id="custom-toc-container" previewcontainer="false"><div class="markdown-toc editormd-markdown-toc"><ul class="markdown-toc-list"><li><a class="toc-level-2" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#0%20%E9%80%9A%E7%94%A8%E7%BA%A6%E5%AE%9A" level="2">0 通用约定</a><ul><li><a class="toc-level-3" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#%E7%AD%BE%E5%90%8D" level="3">签名</a></li></ul></li><li><a class="toc-level-2" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#1.%E6%A0%B9%E6%8D%AEAOI%E6%9F%A5%E8%AF%A2%E6%8E%92%E7%8F%AD%E5%B0%8F%E5%93%A5%E6%8E%A5%E5%8F%A3" level="2">1.根据AOI查询排班小哥接口</a><ul><li><a class="toc-level-4" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#%E5%85%A5%E5%8F%82" level="4">入参</a></li><li><a class="toc-level-4" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#%E8%BF%94%E5%9B%9E" level="4">返回</a><ul><li><a class="toc-level-5" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#aoi_area_list%20%E7%BB%93%E6%9E%84" level="5">aoi_area_list 结构</a></li><li><a class="toc-level-5" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#schedule_list%20%E7%BB%93%E6%9E%84" level="5">schedule_list 结构</a></li><li><a class="toc-level-5" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#courier_list%20%E7%BB%93%E6%9E%84" level="5">courier_list 结构</a></li></ul></li><li><a class="toc-level-4" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#weight_list%20%E7%BB%93%E6%9E%84" level="4">weight_list 结构</a></li><li><a class="toc-level-4" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#%E5%85%A5%E5%8F%82%E7%A4%BA%E4%BE%8B" level="4">入参示例</a></li><li><a class="toc-level-4" href="http://gz-cvm-ebuild-liuhuidang-dev001.gz.sftcwl.com:8550/article/view/1595906332270829#%E8%BF%94%E5%9B%9E%E7%A4%BA%E4%BE%8B" level="4">返回示例</a><ul></ul></li></ul></li></ul></div></div>
        </div>
    </div>

</div>

<script src="assets/marked.min.js"></script>
<script src="assets/prettify.min.js"></script>
<script src="assets/raphael.min.js"></script>
<script src="assets/underscore.min.js"></script>
<script src="assets/sequence-diagram.min.js"></script>
<script src="assets/flowchart.min.js"></script>
<script src="assets/jquery.flowchart.min.js"></script>
<script src="assets/editormd.js"></script>
<script type="text/javascript">
    editormd.markdownToHTML("articleContent", {
        tocm: true,
        tocContainer: "#custom-toc-container", // 自定义 ToC 容器层
        emoji: true,
        taskList: true,
        tex: true,  // 默认不解析
        flowChart: true,  // 默认不解析
        sequenceDiagram: true,  // 默认不解析
    });
</script>

</body></html>