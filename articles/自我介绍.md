# 测试一下啊

## 首先讲个笑话吧
“你男朋友和闺蜜一起掉进水里，你会先救谁？”
“你能跟我解释一下，他们为什么会在一起么？”

今天去菜市场买鱼，我指着左边活蹦乱跳的鱼问老板：“老板这鱼多少钱一斤？”老板说：“这个8块。”我又指着右边有点翻肚的鱼问：“那这个呢？”老板说：“这也是8块。”我说：“可是这鱼快死了啊！”老板淡定道：“没死，天热不想起床而已。”

一对情侣吵架了，第二天在班级里，女生跟男生说：”对不起，我错了。”不一会女生收到男生的短信，“对不起，亲爱的，我回不了头了。”女生痛哭流涕，这时，又接到男生的短信，“我昨晚睡落枕了！”

## 接下来show一下自拍
![自拍](http://test-1256151484.cos.ap-beijing.myqcloud.com/article%2Fimages%2F5f25658e1edd4.jpeg "自拍")
![](http://test-1256151484.cos.ap-beijing.myqcloud.com/article%2Fimages%2F5f25662cf1fa2.gif)

## 然后来段代码
```php
<?php
    /**
     * 腾讯云上传文件
     * @param string $localFilePath
     * @param string $remoteDir
     * @param string $bucket
     * @return mixed
     * @throws \Exception
     */
    public function uploadFile(string $localFilePath, string $remoteDir = '', $bucket = '')
    {
        if (!is_file($localFilePath)) {
            throw new UserNotice(sprintf('[%s]文件不存在', $localFilePath), AppNoticeCode::FILE_NOT_EXISTS);
        }
        if (empty($bucket)) {
            $bucket = $this->config['bucket'];
        }
        if (empty($bucket)) {
            throw new UserNotice('cos bucket不能为空', AppNoticeCode::COS_BUCKET_EMPTY);
        }
        if (empty($remoteDir)) {
            // 取本地文件最后一个文件夹名字
            $remoteDir = end(explode(DIRECTORY_SEPARATOR, dirname($localFilePath)));
        } else {
            $remoteDir = trim($remoteDir, '/\\');
        }
        $remoteFilePath = implode(DIRECTORY_SEPARATOR, [$remoteDir, array_pop(explode(DIRECTORY_SEPARATOR, $localFilePath))]);
        try {
            // 上传资源
            $ret = $this->cosClient->upload($bucket, $remoteFilePath, fopen($localFilePath, 'rb'));
            return $ret->getAll();
        } catch (\Exception $e) {
            Log::warning('cos upload file error:' . $e->getMessage());
            throw new UserNotice('COS上传文件失败', AppNoticeCode::COS_UPLOAD_FAILED);
        }
    }
```
